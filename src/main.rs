//! Chatwork自動既読システムのエントリーポイントです。
//!
//! このプログラムは、Chatworkのメッセージを自動的に既読にするシステムを
//! 起動し、実行します。

use anyhow::Result;
use chatwork_auto_read::run;
use log::error;

/// プログラムのメインエントリーポイントです。
///
/// この関数は以下の処理を行います：
/// 1. `run`関数を呼び出してChatwork自動既読システムを実行します。
/// 2. エラーが発生した場合、エラーメッセージをログに記録し、
///    プログラムを異常終了させます。
///
/// # エラー処理
///
/// - `run`関数がエラーを返した場合、エラーメッセージがログに記録され、
///   プログラムは終了コード1で終了します。
/// - 正常に実行された場合、`Ok(())`を返します。
///
/// # 非同期実行
///
/// この関数は`tokio`ランタイム上で非同期的に実行されます。
#[tokio::main]
async fn main() -> Result<()> {
    if let Err(e) = run().await {
        // エラーが発生した場合、ログにエラーメッセージを記録し、
        // プログラムを異常終了させます。
        error!("アプリケーションエラー: {}", e);
        std::process::exit(1);
    }
    Ok(())
}
